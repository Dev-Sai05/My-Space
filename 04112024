ee<CRITERION Name="Paragraphs Without EXIT/STOP/Transfer" 
           Category="COBOL Performance" 
           System="False" 
           ErrorCode="MFCA1105" 
           Description="This query identifies paragraphs that do not contain an EXIT, STOP, GOBACK, or termination transfer (XFER/TRANS).">
    
    <ENTITY Name="PAR"/>

    <COND Type="and">
        <!-- no EXIT of any kind -->
        <REL Name=":Contains" Op="hasno">
            <ENTITY Name="EXIT"/>
        </REL>

        <!-- no STOP -->
        <REL Name=":Contains" Op="hasno">
            <ENTITY Name="STOP"/>
        </REL>

        <!-- no GOBACK -->
        <REL Name=":Contains" Op="hasno">
            <ENTITY Name="GOBACK"/>
        </REL>

        <!-- no transfer (XFER/TRANS) -->
        <REL Name=":Contains" Op="hasno">
            <ENTITY Name="PORT" Descendants="False"/>
            <ATTR Name=".PORTTYPE" Op="=">
                <ITEM Value="XFER"/>
                <ITEM Value="TRANS"/>
            </ATTR>
        </REL>
    </COND>
</CRITERION>



<CRITERION Name="GO TO Statements Targeting EXIT Paragraphs" Category="" System="False" ErrorCode="MFCA1104" Description="This query is designed to find instances where a GO TO statement branches to a paragraph that contains an EXIT statement, STOP statement, or termination transfer.">
    <ENTITY Name="GOTO"/>
    <COND Type="and">
        <REL Name=".Go to" Op="has">
            <ENTITY Name="PAR" Descendants="True"/>
            <COND Type="or">
                <REL Name=":Contains" Op="has">
                    <ENTITY Name="STAT"/>
                    <ATTR Name=".Kind" Op="=">
                        <ITEM Value="Exit"/>
                    </ATTR>
                </REL>
                <REL Name=":Contains" Op="has">
                    <ENTITY Name="STOP"/>
                </REL>
                <REL Name=":Contains" Op="has">
                    <ENTITY Name="PORT" Descendants="False"/>
                    <ATTR Name=".PORTTYPE" Op="=">
                        <ITEM Value="XFER"/>
                        <ITEM Value="TRANS"/>
                    </ATTR>
                </REL>
            </COND>
        </REL>
        <REL Name=":IsNested" Op="hasno">
            <ENTITY Name="EXEC" Descendants="False"/>
        </REL>
    </COND>
</CRITERION>



1.                  During review of a CR, we wanted code analyzer feature to review code changes done under a specific CR rather than the entire component for following checklists:

1.                  BAD GOTO

        b) EXIT to be written after every para end.

        c) IF should have a corresponding END-IF

        d) UNUSED VARIABLE identification

        e) In case if group initialized is mentioned, eclipse is detecting initialize only for first variable and not the complete group set

        f)  kindly elaborate dead statement error given by eclipse

        g) In case if display statement has any word with .COB extension, the word should be the program name.

        h) Program ID should be same as component name.

1.                   WHERE clause to be a part of the key field of a particular table.

         j) data type and length of the host variable should be same as table variables.

        k) data type and length for both the variable in move statement should be same

        l)  For evaluate statements, when others to be made mandatory

      m) For call statements in COBOL, the order,  data type and length of call program using variables should match with Procedure division using variables of called program


----------------------------


<CRITERION Name="Missing Explicit Scope Delimiters" Category="" System="False" ErrorCode="MFCA1106" Description="This query looks for statements that do not have scope terminators like END-IF .">
			<ENTITY Name="IF" Descendants="False"/>
			<ENTITY Name="PERFORM" Descendants="False"/>
			<ENTITY Name="STAT" Descendants="False"/>
			<COND Type="and">
				<ATTR Name=".Kind" Op="=">
					<ITEM Value="IF"/>
					<ITEM Value="EVALUATE"/>
					<ITEM Value="PERFORM_STAT"/>
					<ITEM Value="SEARCH"/>
				</ATTR>
				<ATTR Name=".HasEnd" Op="false"/>
			</COND>
		</CRITERION

-------------------------

<CRITERION Name="Paragraph Without EXIT"
           Category="COBOL Style"
           System="False"
           ErrorCode="MYCA2002"
           Description="Ensures each paragraph ends with an EXIT statement.">

  <!-- Select all PARAGRAPH entities -->
  <ENTITY Name="Paragraph" Descendants="False"/>

  <COND Type="and">
    <ATTR Name=".Kind" Op="=">
      <ITEM Value="Paragraph"/>
    </ATTR>
    <!-- Check paragraph does not contain EXIT as last statement -->
    <NOT>
      <ATTR Name=".LastStatement.Kind" Op="=">
        <ITEM Value="EXIT"/>
      </ATTR>
    </NOT>
  </COND>
</CRITERION>


+++++++++


<CRITERION Name="Paragraph Without EXIT"
           Category="COBOL Style"
           System="False"
           ErrorCode="MYCA2002"
           Description="Flags paragraphs that do not contain an EXIT and are not followed by an EXIT-only stub paragraph.">

  <ENTITY Name="PAR" Descendants="False"/>

  <COND Type="and">

    <!-- Paragraph does not contain EXIT itself -->
    <REL Name=":Contains" Op="hasno">
      <ENTITY Name="STAT"/>
      <ATTR Name=".Kind" Op="=">
        <ITEM Value="Exit"/>
      </ATTR>
    </REL>

    <!-- And next paragraph is not an EXIT-only stub -->
    <REL Name=":Follows" Op="hasno">
      <ENTITY Name="PAR" Descendants="False"/>

      <!-- That next paragraph must only contain EXIT to count as valid -->
      <COND Type="and">
        <REL Name=":Contains" Op="has">
          <ENTITY Name="STAT"/>
          <ATTR Name=".Kind" Op="=">
            <ITEM Value="Exit"/>
          </ATTR>
        </REL>
        <REL Name=":Contains" Op="hasno">
          <ENTITY Name="STAT"/>
          <ATTR Name=".Kind" Op="!=">
            <ITEM Value="Exit"/>
          </ATTR>
        </REL>
      </COND>
    </REL>

  </COND>
</CRITERION>

mmmmmmmmmmmmm

<CRITERION Name="Paragraph Without EXIT"
           Category="COBOL Style"
           System="False"
           ErrorCode="MYCA2002"
           Description="Ensures each paragraph ends with an EXIT statement.">

  <!-- Select all paragraphs -->
  <ENTITY Name="Paragraph" Descendants="False"/>

  <COND Type="and">
    <ATTR Name=".Kind" Op="=">
      <ITEM Value="Paragraph"/>
    </ATTR>

    <!-- Ensure the last statement is NOT EXIT -->
    <NOT>
      <ENTITY Name="Statement" Position="Last">
        <ATTR Name=".Kind" Op="=">
          <ITEM Value="EXIT"/>
        </ATTR>
      </ENTITY>
    </NOT>
  </COND>
</CRITERION>

((((((

<CRITERION Name="Paragraph Without EXIT"
           Category="COBOL Style"
           System="False"
           ErrorCode="MYCA2002"
           Description="Ensures each working paragraph has a corresponding EXIT at the end.">

  <!-- Select all PARAGRAPH entities -->
  <ENTITY Name="Paragraph" Descendants="True"/>

  <COND Type="and">
    <!-- Must be a normal paragraph (exclude STOP RUN, etc.) -->
    <ATTR Name=".Kind" Op="=">
      <ITEM Value="Paragraph"/>
    </ATTR>

    <!-- Must NOT already be an EXIT paragraph (ignore W399-EXIT, etc.) -->
    <NOT>
      <ATTR Name=".Name" Op="like">
        <ITEM Value="%-EXIT"/>
      </ATTR>
    </NOT>

    <!-- Ensure the next paragraph is NOT an EXIT paragraph -->
    <NOT>
      <ENTITY Name="NextParagraph">
        <ATTR Name=".Name" Op="like">
          <ITEM Value="%-EXIT"/>
        </ATTR>
      </ENTITY>
    </NOT>
  </COND>
</CRITERION>

?????

<CRITERION Name="Paragraph Not Followed By EXIT Stub"
           Category="COBOL Style"
           System="False"
           ErrorCode="MYCA4002"
           Description="Flags PARs that do not contain an EXIT and are not immediately followed by an EXIT-only PAR.">

  <ENTITY Name="PAR" Descendants="False"/>

  <COND Type="and">
    <!-- 1) This PAR does not contain an EXIT -->
    <REL Name=":Contains" Op="hasno">
      <ENTITY Name="STAT"/>
      <ATTR Name=".Kind" Op="=">
        <ITEM Value="Exit"/>
      </ATTR>
    </REL>

    <!-- 2) The following PAR is NOT an EXIT-only stub -->
    <REL Name=":Follows" Op="hasno">
      <ENTITY Name="PAR" Descendants="False"/>

      <!-- the following paragraph must contain an EXIT -->
      <COND Type="and">
        <REL Name=":Contains" Op="has">
          <ENTITY Name="STAT"/>
          <ATTR Name=".Kind" Op="=">
            <ITEM Value="Exit"/>
          </ATTR>
        </REL>
        <!-- and must contain NO other statements besides EXIT -->
        <REL Name=":Contains" Op="hasno">
          <ENTITY Name="STAT"/>
          <ATTR Name=".Kind" Op="!=">
            <ITEM Value="Exit"/>
          </ATTR>
        </REL>
      </COND>
    </REL>
  </COND>
</CRITERION>